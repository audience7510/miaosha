server:
  port: 8090
spring:
  application:
    # 应用名称
    name: miaosha-gateway
    main:
      allow-bean-definition-overriding: true #当遇到同样名字的时候，是否允许覆盖注册
  profiles:
    # 当前使用dev
    active: dev
  cloud:
    #网管配置
    gateway:
      discovery:
        locator:
          #注册到nacos后，开启通过服务发现路由
          enabled: true
          # 服务名转为
          lower-case-service-id: true
      routes:
          #设置路由id，唯一
        - id: miaosha-admin
          #设置路由的uri lb://nacos注册服务名称
          uri: lb://miaosha-admin
          predicates:
            - Path=/admin
      globalcors:
        # 全局允许跨域访问
        cors-configurations:
          '[/**]':
            allow-credentials: true
            allowed-origins: "*"
            allowed-headers: "*"
            allowed-methods:
              - OPTIONS
              - GET
              - POST
              - PUT
              - DELETE
    #nacos配置
    nacos:
      discovery:
        # 注册发现地址
        server-addr: localhost:8848
        #指定nacos上的命名空间
        namespace: public
        # 指定nacos上的配置组名
        group: DEFAULT_GROUP
        register-enabled: true

      config:
        # 指定配置文件地址
        server-addr: localhost:8848
        #指定nacos上的命名空间
        namespace: public
        # 指定nacos上的配置组名
        group: DEFAULT_GROUP
        # 配置文件类型
        file-extension: yml
        # 刷新
        refresh-enabled: true
        # nacos作为配置中心，现在要依赖的配置文件
        shared-configs:
          # nacos上配置文件必须是这个名字的组合
          # - miaosha-admin-dev.yml
          - ${spring.application.name}-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}
